{% extends "base.html" %} 
{% load static %}

{% block title %}Lista de Ocorrências - Sistema de Ocorrências{% endblock %}

{% block content %} 

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1>Lista de Ocorrências Registradas</h1>
        <a href="{% url 'ocorrencia_create' %}" class="btn btn-primary">➕ Cadastrar Nova Ocorrência</a>
    </div>

    <hr>

    {% for ocorrencia in ocorrencias %}
        <div class="card mb-3">
            <div class="card-body">
                <h5 class="card-title"><strong>{{ ocorrencia.natureza.nome }} - {{ ocorrencia.data_hora_fato|date:"d/m/Y H:i" }}</strong></h5>
                <p class="card-text">
                    <strong>Aspecto:</strong> <span class="badge {% if ocorrencia.natureza.tipo_impacto == 'P' %}text-bg-success{% else %}text-bg-danger{% endif %}">{{ ocorrencia.natureza.get_tipo_impacto_display }}</span> |
                    <strong>OPM:</strong> {{ ocorrencia.opm.sigla }} ({{ ocorrencia.opm.municipio.nome }})
                </p>
                </div>
        </div>
    {% empty %}
        <div class="alert alert-info">Nenhuma ocorrência registrada.</div>
    {% endfor %}

{% endblock content %}